<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Calculator Apartamente Grand Beetle Residence</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
      background: #f9f9f9;
      color: #333;
    }
    img.logo {
      max-width: 200px;
      margin-bottom: 20px;
    }
    h1 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
    }
    input, select, button {
      padding: 8px;
      margin-top: 5px;
      width: 100%;
      max-width: 300px;
      display: block;
    }
    .result {
      font-size: 20px;
      font-weight: bold;
      margin-top: 20px;
    }
    .tva-buttons {
      margin: 10px 0;
    }
    .tva-buttons button {
      padding: 10px 20px;
      margin-right: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <img class="logo" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ1uIbSuyHpv0zM3e3Baap6X_vDU9dGRLnCNg&s" alt="Grand Beetle Residence">

  <h1>Calculator preț apartament (fără împrumut)</h1>

  <label for="tip-apartament">Tip apartament:</label>
  <select id="tip-apartament" onchange="selectApartmentType()">
    <option value="">— Selectează —</option>
    <!-- Tipuri 1–20 -->
    <option value="1">Tip 1</option>
    <option value="2">Tip 2</option>
    <option value="3">Tip 3</option>
    <option value="4">Tip 4</option>
    <option value="5">Tip 5</option>
    <option value="6">Tip 6</option>
    <option value="7">Tip 7</option>
    <option value="8">Tip 8</option>
    <option value="9">Tip 9</option>
    <option value="10">Tip 10</option>
    <option value="11">Tip 11</option>
    <option value="12">Tip 12</option>
    <option value="13">Tip 13</option>
    <option value="14">Tip 14</option>
    <option value="15">Tip 15</option>
    <option value="16">Tip 16</option>
    <option value="17">Tip 17</option>
    <option value="18">Tip 18</option>
    <option value="19">Tip 19</option>
    <option value="20">Tip 20</option>
  </select>

  <label for="suprafataUtila">Suprafață utilă (m²):</label>
  <input type="number" id="suprafataUtila" onchange="calculeazaPret()">

  <label for="balcon">Suprafață balcon (m²):</label>
  <input type="number" id="balcon" onchange="calculeazaPret()">

  <label for="pretMp2">Preț pe m² (fără TVA):</label>
  <input type="number" id="pretMp2" value="1300" onchange="calculeazaPret()">

  <div class="tva-buttons">
    <label>TVA:</label>
    <button onclick="setTVA(0.09)">9%</button>
    <button onclick="setTVA(0.21)">21%</button>
  </div>

  <div class="result" id="pretTotal">Preț total: —</div>

  <button onclick="genereazaPDF()">Exportă ca PDF</button>

  <script>
    let tva = 0.09;

    const apartamente = {
      1:  { util: 37.97, balcon: 4.56 },
      2:  { util: 37.00, balcon: 4.60 },
      3:  { util: 52.10, balcon: 11.80 },
      4:  { util: 52.10, balcon: 9.60 },
      5:  { util: 52.00, balcon: 11.20 },
      6:  { util: 53.00, balcon: 4.40 },
      7:  { util: 37.00, balcon: 8.50 },
      8:  { util: 37.10, balcon: 8.50 },
      9:  { util: 52.30, balcon: 11.80 },
      10: { util: 52.30, balcon: 9.60 },
      11: { util: 72.20, balcon: 11.80 },
      12: { util: 57.50, balcon: 2.80 },
      13: { util: 56.10, balcon: 2.80 },
      14: { util: 59.80, balcon: 5.00 },
      15: { util: 64.80, balcon: 6.50 },
      16: { util: 37.50, balcon: 6.30 },
      17: { util: 40.00, balcon: 6.60 },
      18: { util: 38.50, balcon: 3.50 },
      19: { util: 37.30, balcon: 4.20 },
      20: { util: 57.60, balcon: 14.30 }
    };

    function selectApartmentType() {
      const tip = document.getElementById("tip-apartament").value;
      if (tip && apartamente[tip]) {
        document.getElementById("suprafataUtila").value = apartamente[tip].util;
        document.getElementById("balcon").value = apartamente[tip].balcon;
        calculeazaPret();
      }
    }

    function setTVA(val) {
      tva = val;
      calculeazaPret();
    }

    function calculeazaPret() {
      const util = parseFloat(document.getElementById("suprafataUtila").value) || 0;
      const balcon = parseFloat(document.getElementById("balcon").value) || 0;
      const pretMp2 = parseFloat(document.getElementById("pretMp2").value) || 0;

      const pretFaraTVA = (util * pretMp2) + (balcon * (pretMp2 / 2));
      const pretCuTVA = pretFaraTVA * (1 + tva);

      document.getElementById("pretTotal").innerText =
        `Preț total: ${Math.round(pretCuTVA).toLocaleString("ro-RO")} €`;
    }

    function genereazaPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const util = document.getElementById("suprafataUtila").value;
      const balcon = document.getElementById("balcon").value;
      const pretMp2 = document.getElementById("pretMp2").value;
      const total = document.getElementById("pretTotal").innerText;

      doc.setFontSize(14);
      doc.text("Calculator Preț Apartament", 20, 20);
      doc.text(`Suprafață utilă: ${util} m²`, 20, 40);
      doc.text(`Balcon: ${balcon} m²`, 20, 50);
      doc.text(`Preț pe m² (fără TVA): ${pretMp2} €`, 20, 60);
      doc.text(`TVA: ${Math.round(tva * 100)}%`, 20, 70);
      doc.text(total, 20, 90);

      doc.save("calcul_apartament.pdf");
    }
  </script>

</body>
</html>
